version: '3.9'

x-dls-variables: &dls-variables
  TZ: Europe/Moscow # REQUIRED, set your timezone correctly on fastapi-dls AND YOUR CLIENTS !!!
  DLS_URL: localhost # REQUIRED, change to your ip or hostname
  DLS_PORT: 8080
  LEASE_EXPIRE_DAYS: 90  # 90 days is maximum
  DATABASE: 'postgresql+psycopg2://dls:test_password@172.17.0.1/dls'
  DEBUG: false
  VERSION: 1.0

services:
  dls:
    build:
      context: .
      dockerfile: Dockerfile
    restart: always
    environment:
      <<: *dls-variables
    ports:
      - "8080:8080"
    volumes:
      - /opt/docker/fastapi-dls/cert:/app/cert
    logging: # optional, for those who do not need logs
      driver: "json-file"
      options:
        max-file: 5
        max-size: 10m
